<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>IMBR ‚Äì Recrutas Ativos</title>

<link rel="stylesheet" href="style.css" />

</head>

<body>
<header>
  <div class="header-inner">
    <a href="index.html" class="logo-link">
      <div class="logo-box">
        <img src="imbr-logo.png" alt="Logo Clan IMBR" />
        <div>
          <div class="logo-text-main">IMBR</div>
          <div class="logo-text-sub">Clan 100% Brasileiro ¬∑ Age of Empires IV</div>
        </div>
      </div>
    </a>
    <button class="menu-toggle" type="button" aria-label="Abrir menu" onclick="toggleMenu()">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>
</header>


 <main>
    <section class="lineup-card">
      <div class="lineup-header">
        <div>
          <h2 class="lineup-title">Recrutas com menos de 30 jogos</h2>
          <p class="lineup-sub">
            Jogadores marcados como <strong>Recruta</strong> com menos de 30 partidas nos √∫ltimos 30 dias.
          </p>
        </div>
        <div class="role-pill">
          <span class="role-dot"></span> Lista din√¢mica via planilha
        </div>
      </div>

      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>Jogador</th>
              <th>Partidas (30d)</th>
              <th>Dias no Clan</th>
              <th>Perfil</th>
            </tr>
          </thead>
          <tbody id="recrutas-body"></tbody>
        </table>
      </div>
    </section>
  </main>

  <footer>
    <span>Desenvolvido por AzX(Gui) IMBR ¬∑ Age of Empires IV ¬∑ Brasil</span>
  </footer>

  <script>


  function toggleMenu() {
    document.body.classList.toggle("menu-open");
  }

  function closeMenu() {
    document.body.classList.remove("menu-open");
  }

  // Fecha com ESC
  document.addEventListener("keydown", function (e) {
    if (e.key === "Escape") {
      closeMenu();
    }
  });



    
    const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTihzZmyAJhTVjALmuX1R1YTGyuW0p-5umWppci2rQVRMJ5h1m2IrkZo4wi4MUN_fZ03vxu2vwFT2ob/pub?gid=1146212629&single=true&output=csv";

    // MESMA FUN√á√ÉO DO INDEX (usa partidas-vermelho / partidas-verde j√° do CSS)
    function aplicarCorPartidas(elemento, valor) {
      if (valor == null) return;

      const numero = parseInt(valor.toString().replace("+", ""));

      if (isNaN(numero)) return;
      elemento.classList.remove("partidas-vermelho", "partidas-amarelo", "partidas-verde");
      elemento.style.color = "";
      elemento.style.fontWeight = "bold";

      if (numero === 0) {
        elemento.classList.add("partidas-vermelho");
      } else if (numero < 30) {
        const t = (numero - 1) / 28;
        const hue = 0 + 50 * t;
        const saturation = 100;
        const lightness = 50;

        elemento.style.color = `hsl(${hue}, ${saturation}%, ${lightness}%)`;
      } else {
        elemento.classList.add("partidas-verde");
      }
    }

    fetch(CSV_URL)
      .then(r => r.text())
      .then(csv => {
        const tbody = document.getElementById("recrutas-body");
        const linhas = csv.trim().split("\n").slice(1);

        linhas.forEach(linha => {
          const cols = linha.split(",");
          const nome   = (cols[0] || "").trim();
          const role   = (cols[1] || "").trim();
          const jogos  = (cols[4] || "").trim();
          const dias   = (cols[5] || "").trim();
          const perfil = (cols[6] || "").trim();

          if (!nome) return;

          const partidas = parseInt(jogos.replace("+","").trim());

          // FILTRO: s√≥ Recruta com menos de 30 partidas
          if (role === "Recruta" && partidas < 30) {
            const tr = document.createElement("tr");
            tr.innerHTML = `
              <td>${nome}</td>
              <td class="matches-cell">${jogos}</td>
              <td>${dias}</td>
              <td><a class="aoe-link" href="${perfil}" target="_blank" rel="noopener">Ver perfil</a></td>
            `;
            tbody.appendChild(tr);

            const matchesTd = tr.querySelector(".matches-cell");
            aplicarCorPartidas(matchesTd, jogos);
          }
        });
      });
  </script>

<div id="menu-overlay" class="menu-overlay" onclick="closeMenu()"></div>
<nav id="side-menu" class="side-menu" aria-label="Menu principal">
  <div class="side-menu-header">
    <span>Menu IMBR</span>
    <button type="button" class="side-menu-close" aria-label="Fechar menu" onclick="closeMenu()">√ó</button>
  </div>
  <a href="index.html">üè† Home</a>
  <a href="index.html#lineup">üë• Lineup & Staff</a>
  <a href="redlist.html">üü° Recrutas Ativos</a>
  <a href="index.html#duelos">‚öîÔ∏è Duelos</a>
  <a href="index.html#campeonatos">üèÜ Campeonatos</a>
</nav>


</body>
</html>
