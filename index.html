<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Clan IMBR - Age of Empires IV</title>
<link rel="stylesheet" href="style.css" />
  
</head>

<body>
<div id="menu-container"></div>
<header>
  <div class="header-inner">
    <a href="index.html" class="logo-link">
      <div class="logo-box">
        <img src="imbr-logo.png" alt="Logo Clan IMBR" />
        <div>
          <div class="logo-text-main">IMBR</div>
          <div class="logo-text-sub">Clan 100% Brasileiro ¬∑ Age of Empires IV</div>
        </div>
      </div>
    </a>

    <button class="menu-toggle" type="button" aria-label="Abrir menu" data-menu-open>
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>
</header>

  <main>
	<section class="logo-big-card">
			<img src="imbr-logo.png" alt="Logo IMBR" class="logo-big">
		</section> 
  
    <section class="intro-card">
      <div class="intro-tag">
        <span class="icon"></span>
        <span>Dispon√≠vel para duelos!</span>
      </div>
      <h1 class="intro-title">
        Clan <span class="intro-highlight">IMBR</span> ¬∑ Age of Empires IV
      </h1>
      <p class="intro-text">
O <strong>IMBR</strong> √© um cl√£ brasileiro de <strong>Age of Empires IV</strong> que nasce da <strong>maior comunidade brasileira do jogo:</strong> os viewers do  Pro Player/Streamer <strong>GKS</strong> e o <strong>GKS Empire</strong>, o maior Discord de AoE4 do Brasil. Nosso nome representa a nacionalidade e √© uma refer√™ncia direta √† tradi√ß√£o competitiva brasileira ‚Äî quem conhece, sabe de onde vem.

Sob a administra√ß√£o do AzX, o IMBR se tornou disparado <strong>o grupo mais ativo do cen√°rio BR</strong>. Aqui n√£o tem cl√£ fantasma, nem projeto parado: realizamos <strong>campeonatos mensais</strong>, treinos frequentes, an√°lises, troca constante de conhecimento e <strong>muita ajuda m√∫tua</strong>. O Discord est√° sempre vivo, com gente jogando, discutindo estrat√©gia e evoluindo junto.

O resultado aparece no jogo: v√°rios membros do cl√£ conseguiram <strong>subir para Conqueror</strong> gra√ßas ao ambiente competitivo, √† conviv√™ncia com jogadores fortes e ao apoio da comunidade. No IMBR, quem quer melhorar, melhora.

Somos organiza√ß√£o, const√¢ncia e presen√ßa real ‚Äî n√£o s√≥ nome bonito.
Tem gente que observa, copia‚Ä¶ faz parte üòè
<strong>IMBR √© original. Recuse imita√ß√µes.</strong>
      </p>
    </section>

	<section class="duelos-card">
  <h2 class="duelos-title">üî• √öltimos Duelos</h2>

  <div class="table-wrapper">
    <table>
      <thead>
        <tr>
          <th>Data</th>
          <th>Oponente</th>
          <th>Formato</th>
          <th>Resultado</th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>26/11/2025</td>
          <td>Aleatorio</td>
          <td>Bo3 2x2</td>
          <td><span class="win">Vit√≥ria</span></td>
        </tr>
        <tr>
          <td>---</td>
          <td>---</td>
          <td>---</td>
          <td><span class="">---</span></td>
        </tr>
        <tr>
          <td>---</td>
          <td>---</td>
          <td>---</td>
          <td><span class="">---</span></td>
        </tr>
        <tr>
          <td>---</td>
          <td>---</td>
          <td>---</td>
          <td><span class="">---</span></td>
        </tr>
        <tr>
          <td>---</td>
          <td>---</td>
          <td>---</td>
          <td><span class="">---</span></td>
        </tr>
      </tbody>
    </table>
  </div>
</section>

	<section class="youtube-card">
		<h2 class="youtube-title">üé¨ √öltimo V√≠deo do Canal GKS</h2>
		<div class="youtube-frame-container">
			<iframe 
				src="https://www.youtube.com/embed/C7uMXbv0FZM" 
				title="√öltimo v√≠deo do canal"
				frameborder="0"
				allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
				allowfullscreen>
			</iframe>
		</div>
	</section>

	  
	  
<section class="roles-count-card" id="roles-count-card">
  <h2 class="roles-count-title">üìä Distribui√ß√£o por Cargo</h2>
  <p class="roles-count-sub">Resumo dos membros do cl√£ de acordo com suas fun√ß√µes</p>
  <div class="roles-count-grid" id="roles-count-grid"></div>
</section>

<div class="champ-card">
  <h2>üèÜ √öltimo Campeonato IMBR ‚Äì Classifica√ß√£o Final</h2>
  <img src="bracket-imbr.jpg" alt="Bracket do √∫ltimo campeonato IMBR">
  <table class="champ-table">
    <tr>
      <th>Posi√ß√£o</th>
      <th>Jogador</th>
      <th>Pontos</th>
    </tr>
    <tr><td class="pos1">1¬∫</td><td>IMBR TinDum</td><td>40</td></tr>
    <tr><td class="pos2">2¬∫</td><td>IMBR | gabrieljustware</td><td>28</td></tr>
    <tr><td class="pos3">3¬∫</td><td>IMBR | Mayllows</td><td>20</td></tr>
    <tr><td>4¬∫</td><td>Zubatch8426</td><td>16</td></tr>
    <tr><td>5¬∫</td><td>IMBR oneshot</td><td>12</td></tr>
    <tr><td>6¬∫</td><td>IMBR | slackw4re</td><td>12</td></tr>
    <tr><td>7¬∫</td><td>IMBR | P4L4D1NO</td><td>10</td></tr>
    <tr><td>8¬∫</td><td>IMBR | Nettovski</td><td>10</td></tr>
    <tr><td>9¬∫</td><td>IMBR | Lery [AOE4]</td><td>5</td></tr>
    <tr><td>10¬∫</td><td>Pirolli93</td><td>5</td></tr>
    <tr><td>11¬∫</td><td>IMBR | Aledrox</td><td>5</td></tr>
    <tr><td>12¬∫</td><td>IMBR | Nero</td><td>5</td></tr>
    <tr><td>13¬∫</td><td>IMBR | Gamerkiis</td><td>5</td></tr>
    <tr><td>14¬∫</td><td>IMBR abueno</td><td>5</td></tr>
    <tr><td>15¬∫</td><td>IMBR | Igor</td><td>5</td></tr>
    <tr><td>16¬∫</td><td>yDRAGONBORN7398</td><td>5</td></tr>
    <tr><td>17¬∫</td><td>IMBR | Kaisersc</td><td>5</td></tr>
    <tr><td>18¬∫</td><td>IMBResfria</td><td>5</td></tr>
    <tr><td>19¬∫</td><td>JOAO17714</td><td>5</td></tr>
    <tr><td>20¬∫</td><td>IMBR | Kira3K</td><td>5</td></tr>
  </table>
</div>
	  
    <section class="lineup-card">
      <div class="lineup-header">
        <div>
          <h2 class="lineup-title">Lineup &amp; Staff</h2>
          <p class="lineup-sub">
            Lista de jogadores titulares, reservas, coach e management do clan.
          </p>
        </div>
        <div class="role-pill">
          <span class="role-dot"></span> Atualizado 08/12
        </div>
      </div>

      <div class="table-wrapper">
        <table>
			<thead>
			  <tr>
			    <th>Fun√ß√£o</th>
			    <th>Jogador</th>
			    <th>Solo Status</th>
			    <th>Team Status</th>
			    <th>Matches √∫ltimos 30 dias</th>
			    <th>Dias no Clan</th>
			    <th>Perfil aoe4world</th>
			  </tr>
			</thead>

			<tbody id="lineup-body">
			</tbody>

        </table>
      </div>
    </section>
  </main>

  <footer>
    <span>Desenvolvido por AzX(Gui) IMBR ¬∑ Age of Empires IV ¬∑ Brasil</span>
  </footer>

<script src="menu.js"></script>
	
<script>

  function aplicarCorPartidas(elemento, valor) {
    if (valor == null) return;

    const numero = parseInt(valor.toString().replace("+", ""));

    if (isNaN(numero)) return;
    elemento.classList.remove("partidas-vermelho", "partidas-amarelo", "partidas-verde");
    elemento.style.color = "";
    elemento.style.fontWeight = "bold";

    if (numero === 0) {
      elemento.classList.add("partidas-vermelho");
    } else if (numero < 30) {
      const t = (numero - 1) / 28; 
      const hue = 0 + 50 * t;
      const saturation = 100;
      const lightness = 50;

      elemento.style.color = `hsl(${hue}, ${saturation}%, ${lightness}%)`;
    } else {
      elemento.classList.add("partidas-verde");
    }
  }

  const SHEET_CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTihzZmyAJhTVjALmuX1R1YTGyuW0p-5umWppci2rQVRMJ5h1m2IrkZo4wi4MUN_fZ03vxu2vwFT2ob/pub?gid=1146212629&single=true&output=csv";

  const roleClassMap = {
    "Coach":   "coach",
    "Titular": "main",
    "Reserva": "sub",
    "Serie B": "sub",
    "Recruta": "sub",
    "Manager": "staff",
    "Staff":   "staff"
  };

  const roleGroupMap = {
    "Coach":   "Coach",
    "Titular": "Titular",
    "Reserva": "ReservasRecrutas",
    "Serie B": "ReservasRecrutas",
    "Recruta": "ReservasRecrutas",
    "Manager": "Management",
    "Staff":   "Management"
  };

  const roleCounters = {
    "Coach":            0,
    "Titular":          0,
    "ReservasRecrutas": 0,
    "Management":       0
  };

  const roleGroupsOrder = [
    { key: "Coach",            label: "Coach",              className: "coach" },
    { key: "Titular",          label: "Titular",            className: "main" },
    { key: "ReservasRecrutas", label: "Reserva / Recruta",  className: "sub" },
    { key: "Management",       label: "Staff",              className: "staff" }
  ];

  function getEloClass(texto) {
    const t = (texto || "").toLowerCase();
    if (t.includes("conquer")) return "elo-conqueror";
    if (t.includes("diamond") || t.includes("diam")) return "elo-diamond";
    if (t.includes("plat")) return "elo-platinum";
    if (t.includes("gold") || t.includes("ouro")) return "elo-gold";
    if (t.includes("silver") || t.includes("prata")) return "elo-silver";
    if (t.includes("bronze")) return "elo-bronze";
    return "";
  }

  fetch(SHEET_CSV_URL)
    .then(response => response.text())
    .then(csvText => {
      const tbody = document.getElementById("lineup-body");
      const grid  = document.getElementById("roles-count-grid");
      if (!tbody || !grid) return;

      const lines = csvText.trim().split("\n");
      if (lines.length <= 1) return;

      lines.slice(1).forEach(line => {
        if (!line.trim()) return;

        const cols = line.split(",");
        const nome       = (cols[0] || "").trim();
        const role       = (cols[1] || "").trim();
        const soloStatus = (cols[2] || "").trim();
        const teamStatus = (cols[3] || "").trim();
        const matchs     = (cols[4] || "").trim();
        const diasClan   = (cols[5] || "").trim();
        const perfilUrl  = (cols[6] || "#").trim();

        if (!nome) return;

        const groupKey = roleGroupMap[role];
        if (groupKey && roleCounters.hasOwnProperty(groupKey)) {
          roleCounters[groupKey] += 1;
        }

        let nomeFormatado = nome;
        const upperNome = nome.toUpperCase();
        if (upperNome.startsWith("IMBR")) {
          let resto = nome.slice(4).trim();
          if (resto.startsWith("|")) {
            resto = resto.slice(1).trim();
          }
          nomeFormatado = `<span class="imbr-pulse">IMBR</span>${resto ? " | " + resto : ""}`;
        }

        const roleClass     = roleClassMap[role] || "sub";
        const soloClass     = getEloClass(soloStatus);
        const teamClass     = getEloClass(teamStatus);
        const soloFormatted = soloStatus.replace(" - ", `<span class="elo-break">`);
        const teamFormatted = teamStatus.replace(" - ", `<span class="elo-break">`);

        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td><span class="role-badge ${roleClass}">${role}</span></td>
          <td>${nomeFormatado}</td>
          <td><span class="elo-pill ${soloClass}">${soloFormatted}</span></td>
          <td><span class="elo-pill ${teamClass}">${teamFormatted}</span></td>
          <td class="matches-cell">${matchs}</td>
          <td>${diasClan}</td>
          <td><a class="aoe-link" href="${perfilUrl}" target="_blank" rel="noopener">Ver perfil</a></td>
        `;

        tbody.appendChild(tr);

        const matchesTd = tr.querySelector(".matches-cell");
        aplicarCorPartidas(matchesTd, matchs);
      });

      roleGroupsOrder.forEach(group => {
        const total = roleCounters[group.key] ?? 0;

        const box = document.createElement("div");
        box.className = `role-count-box ${group.className}`;
        box.innerHTML = `
          <div class="role-count-title">${group.label}</div>
          <div class="role-count-number">${total}</div>
        `;
        grid.appendChild(box);
      });
    })
    .catch(err => console.error("Erro ao carregar lineup/cargos:", err));

  document.addEventListener("DOMContentLoaded", () => {
    fetch("menu.html")
      .then(r => r.text())
      .then(html => {
        const el = document.getElementById("menu-container");
        if (el) el.innerHTML = html;
      })
      .catch(console.error);
  });
</script>
</body>
</html>

